{"version":3,"sources":["components/prop.js","components/prompt.js","components/result.js","components/basic.js","App.js","serviceWorker.js","index.js"],"names":["temp","PropItem","props","state","num","value","name","total","callback","partial","e","n","this","setState","className","onClick","changeNum","bind","React","Component","PropTable","items","submit","cost","handleCost","res","map","i","key","sha256","transName","Academic","Social","Normal","TopButton","window","scrollTo","Jump","isShow","change","v","innerWidth","addEventListener","handleResize","removeEventListener","Result","data","handleData","push","id","basic","occupation","character","src","image","background","Basic","fileInput","createRef","handleSubmit","handleImage","target","type","style","scrollHeight","files","URL","createObjectURL","current","title","sta","onChange","geneInput","accept","ref","App","ser","point","isPress","changePoint","pageNum","handleKeyPress","mode","keyCode","b","p","jumpSer","changeSer","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","error","ReactDOM","render","createElement","StrictMode","document","getElementById","process","href","origin","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.7d1811e5.chunk.js","sourcesContent":["import React from 'react';\r\nimport sha256 from 'js-sha256'\r\nimport './CSS/prop.css'\r\nvar temp = {};\r\n\r\nclass PropItem extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            num: props.value,\r\n        }\r\n        this.name = props.name;\r\n        this.total = props.callback.total;   //总点数回调\r\n        this.partial = props.callback.partial;   //类别统计回调\r\n        this.partial(this.name, this.state.num);\r\n    }\r\n\r\n    changeNum(e) {\r\n        //由上层函数判断操作合法性\r\n        //如果操作合法，则改变当前对象的值\r\n        let n = this.state.num + this.total(e, this.state.num);\r\n        this.partial(this.name, n);\r\n        this.setState({ num: n });\r\n    }\r\n\r\n    render() {\r\n        return <tr>\r\n            <td className='propItem'>\r\n                <div className='propName'>\r\n                    {this.name}\r\n                </div>\r\n                <div className='propCtrl'>\r\n                    <button className='propBtn propBtn-left' value='sub' onClick={this.changeNum.bind(this)} > - </button>\r\n                    <div className='propNum'>\r\n                        {this.state.num}\r\n                    </div>\r\n                    <button className='propBtn propBtn-right' value='add' onClick={this.changeNum.bind(this)} > + </button>\r\n                </div>\r\n            </td>\r\n        </tr>;\r\n    }\r\n}\r\n\r\nclass PropTable extends React.Component {\r\n    static transName = {\r\n        Academic: '学术能力',\r\n        Social: '社交能力',\r\n        Normal: '普通能力'\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.items = props.items;\r\n        this.submit = props.callback.submit;\r\n        this.name = props.name;\r\n\r\n        this.callback = {\r\n            total: props.callback.cost,\r\n            partial: this.handleCost.bind(this)\r\n        }\r\n\r\n        if (!(this.name in temp)) temp[this.name] = {};\r\n        this.state = temp[this.name];\r\n        this.res = this.items.map((i) => {\r\n            return <PropItem name={i} value={i in this.state ? this.state[i] : 0}\r\n                key={sha256(i)} callback={this.callback} />;\r\n        })\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        for (let i in this.state) temp[this.name][i] = this.state[i];\r\n        this.submit(this.state, this.name);\r\n    }\r\n\r\n    handleCost(name, num) {\r\n        this.setState({ [name]: num });\r\n        this.submit(this.state, this.name);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className='propArea'>\r\n                <div className='title'>{PropTable.transName[this.name]}</div>\r\n                <table>\r\n                    <tbody>\r\n                        {this.res}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction Academic(props) {\r\n    var items = ['会计', '人类学', '考古学', '建筑学', '艺术史', '生物学', '密码学', '地质学', '克苏鲁神话', '历史', '语言', '法律', '文献查阅', '医学', '神秘学', '物理学', '神学'];\r\n\r\n    return <PropTable items={items} callback={props.callback} name='Academic' />;\r\n}\r\nfunction Social(props) {\r\n    var items = ['察言观色', '议价', '官僚', '警方交谈', '信誉', '奉承', '审讯', '威胁', '口述采访', '安抚', '底层社会'];\r\n\r\n    return <PropTable items={items} callback={props.callback} name='Social' />;\r\n}\r\n\r\nfunction Normal(props) {\r\n    var items = ['运动', '藏匿', '伪装', '驾驶', '电器维修', '爆破', '偷窃', '枪械', '急救', '逃脱', '健康', '催眠', '机械维修', '导航', '物品整备', '精神分析', '骑术', '心智', '坚毅', '搏击', '警觉', '追踪', '潜行', '近战武器'];\r\n\r\n    return <PropTable items={items} callback={props.callback} name='Normal' />;\r\n}\r\nexport {\r\n    Academic,\r\n    Social,\r\n    Normal,\r\n};","import React from 'react';\r\nimport './CSS/prompt.css'\r\n\r\nfunction TopButton() {\r\n    return (\r\n        <div className='topButton' onClick={() => { window.scrollTo(0, 0) }}>\r\n        </div>);\r\n}\r\n\r\nclass Jump extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isShow: true,\r\n            num: props.num\r\n        };\r\n        this.change = props.change;\r\n        this.name = ['基本信息', '学术能力', '社交能力', '普通能力', '结果'].map(\r\n            (v, i) => <div className='jumpItems' onClick={(e) => { this.change(i) }}>{v}</div>);\r\n\r\n    }\r\n\r\n    handleResize(e) {\r\n        if (e.innerWidth <= 1050) this.setState({ isShow: false });\r\n        else this.setState({ isShow: true });\r\n    }\r\n\r\n    componentWillMount() {\r\n        window.addEventListener('resize', this.handleResize.bind(this));\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('resize', this.handleResize.bind(this));\r\n    }\r\n\r\n    componentWillReceiveProps(props) {\r\n        this.setState({ num:props.num });\r\n    }\r\n\r\n    render() {\r\n        if (window.innerWidth <= 1050 && this.state.isShow) return <div></div>;\r\n        return (\r\n            (<div className='jump'>\r\n                {this.name}\r\n                <div className='jumpPoint'>\r\n                    剩余总点数\r\n            <div className='jumpPointNum'>{this.state.num}</div>\r\n                </div>\r\n            </div>)\r\n        );\r\n    }\r\n}\r\n\r\nclass prompt extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {};\r\n    }\r\n    render() {\r\n        return (\r\n            <div></div>\r\n        );\r\n    }\r\n}\r\n\r\nexport {\r\n    prompt,\r\n    TopButton,\r\n    Jump\r\n};","import React from 'react';\r\nimport './CSS/result.css'\r\nimport sha256 from 'js-sha256'\r\nimport html2canvas from 'html2canvas'\r\n\r\nclass Result extends React.Component {\r\n    static transName = {\r\n        Academic: '学术能力',\r\n        Social: '社交能力',\r\n        Normal: '普通能力'\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            data: props.data,\r\n        };\r\n        this.handleData = this.handleData.bind(this);\r\n    }\r\n\r\n    componentWillReceiveProps(props) {\r\n        this.setState({ data: props.data });\r\n    }\r\n\r\n    handleData(name) {\r\n        if (!(name in this.state.data)) return;\r\n        let res = [<div className='resultTitle'>{Result.transName[name]}</div>];\r\n        let data = this.state.data[name];\r\n        for (let i in data) res.push(\r\n            <div className='resultItems'\r\n                id={sha256(i)}>\r\n                <p>{i}</p>\r\n                <p className='resultItemsNum'>{data[i]}</p>\r\n            </div>);\r\n        return res;\r\n    }\r\n\r\n    render() {\r\n        let basic = { ...this.state.data['Basic'] };\r\n        return (<div className='result'>\r\n            <div className='title'>结果</div>\r\n            <div className='resultBasic'>\r\n                <div className='resultBasicTable'>\r\n                    <div className='resultBasicItems'>\r\n                        姓名：<p>{basic.name}</p>\r\n                    </div>\r\n                    <div className='resultBasicItems'>\r\n                        职业：<p>{basic.occupation}</p>\r\n                    </div>\r\n                    <div className='resultBasicItems'>\r\n                        性格：<p>{basic.character}</p>\r\n                    </div>\r\n                </div>\r\n                <img src={basic.image} />\r\n            </div>\r\n            <div className='resultTable'>\r\n                {this.handleData('Academic')}\r\n                {this.handleData('Social')}\r\n                {this.handleData('Normal')}\r\n            </div>\r\n            <div className='backgroundStory'>\r\n                <h2>背景故事</h2>\r\n                <article>\r\n                {basic.background}\r\n                </article>\r\n            </div>\r\n        </div>);\r\n    }\r\n}\r\n\r\nexport default Result;","import React, { createRef } from 'react'\r\nimport sha256 from 'js-sha256'\r\nimport './CSS/basic.css'\r\n\r\nclass Basic extends React.Component {\r\n    static temp = {\r\n        name: '',\r\n        occupation: '',\r\n        character: '',\r\n        background: '',\r\n        image: ' ',\r\n    };\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = Basic.temp;\r\n        this.submit = props.submit;\r\n        this.fileInput = createRef();\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleImage = this.handleImage.bind(this);\r\n    }\r\n\r\n    handleSubmit(e) {\r\n        //自适应高度\r\n        if (e.target.type == 'textarea') {\r\n            e.target.style['height'] = 'auto';\r\n            e.target.style['height'] = e.target.scrollHeight + 'px';\r\n        }\r\n        this.setState({ [e.target.name]: e.target.value });\r\n    }\r\n\r\n    handleImage(e) {\r\n        let src = e.target.files[0] ? window.URL.createObjectURL(e.target.files[0]) : ' ';\r\n        this.fileInput.current.src = src;\r\n        this.setState({ image: src });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        for (let i in this.state)\r\n            Basic.temp[i] = this.state[i];\r\n        this.submit(this.state, 'Basic');\r\n        //上传basic数据\r\n    }\r\n\r\n    geneInput(title, name, sta = 0) {\r\n        let temp;\r\n        if (sta === 0) temp = <input className='input' name={name} value={this.state[name]} onChange={this.handleSubmit} />;\r\n        if (sta === 1) temp = <textarea className='input inputTextarea' name={name} value={this.state[name]} onChange={this.handleSubmit} />;\r\n        return (<div className='inputField' key={sha256(name)}>\r\n            <div className='itemName'>{title}：</div>\r\n            {temp}\r\n        </div>);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className='basicInput'>\r\n                <div className='title'>基本信息</div>\r\n\r\n                {[this.geneInput('调查员姓名', 'name'),\r\n                this.geneInput('职业', 'occupation'),\r\n                this.geneInput('性格特征', 'character'),\r\n                this.geneInput('背景故事', 'background', 1)]}\r\n\r\n                <div className='inputField'>\r\n                    <div className='itemName'>头像：</div>\r\n                    <div className='input imgInput' >\r\n                        <p>点击此处上传图片</p>\r\n                        <input\r\n                            type='file'\r\n                            accept='image/*'\r\n                            id='rawImgInput' name='image'\r\n                            onChange={this.handleImage}\r\n                        />\r\n                    </div>\r\n\r\n                    <img id='preview' ref={this.fileInput}></img>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Basic;","import React from 'react';\r\nimport { Academic, Social, Normal } from './components/prop'\r\nimport { TopButton, Jump } from \"./components/prompt\";\r\nimport Result from './components/result';\r\nimport Basic from './components/basic'\r\nimport './App.css';\r\n\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            ser: 0,\r\n            point: 20,\r\n            isPress: false,\r\n        }\r\n        this.callback = {\r\n            cost: this.changePoint.bind(this),\r\n            submit: this.handleSubmit.bind(this)\r\n        }\r\n        this.pageNum = 5;\r\n        this.handleKeyPress = this.handleKeyPress.bind(this);\r\n    }\r\n\r\n    componentWillMount() {\r\n        window.addEventListener('keydown', e => this.handleKeyPress(true, e));\r\n        window.addEventListener('keyup', e => this.handleKeyPress(false, e));\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('keydown', e => this.handleKeyPress(true, e));\r\n        window.removeEventListener('keyup', e => this.handleKeyPress(false, e));\r\n    }\r\n\r\n    handleKeyPress(mode, e) {\r\n        if (mode) {\r\n            if (!this.state.isPress && e.keyCode == 17) this.setState({ isPress: true });\r\n        }\r\n        else {\r\n            this.setState({ isPress: false });\r\n        }\r\n    }\r\n\r\n    changeSer(e) {\r\n        window.scrollTo(0, 0);\r\n        if (this.state.ser > this.pageNum || this.state.ser < 0) return;\r\n        if (e.target.value === 'add')\r\n            this.setState({ ser: this.state.ser + 1 });\r\n        if (e.target.value === 'sub')\r\n            this.setState({ ser: this.state.ser - 1 });\r\n    }\r\n\r\n    jumpSer(num) {\r\n        window.scrollTo(0, 0);\r\n        this.setState({ ser: num });\r\n    }\r\n\r\n    changePoint(e, num) {\r\n        let b = this.state.isPress;\r\n        let p = this.state.point;\r\n        if (e.target.value === 'add') {\r\n            if (this.state.point === 0) return 0;  //如果总点数为0则减小操作无效\r\n            else {\r\n                let v = b ? (p > 10 ? 10 : p) : 1;\r\n                this.setState({ point: p - v });\r\n                return v;\r\n            }\r\n        }\r\n        else if (e.target.value === 'sub') {\r\n            if (num === 0) return 0;   //如果对象剩余点数为0则增加操作无效\r\n            else {\r\n                let v = b ? (num > 10 ? 10 : num) : 1;\r\n                this.setState({ point: p + v });\r\n                return -v;\r\n            }\r\n        }\r\n    }\r\n\r\n    handleSubmit(data, name) {\r\n        this.setState({ [name]: data });\r\n    }\r\n\r\n    render() {\r\n        var temp = [\r\n            <Basic submit={this.handleSubmit.bind(this)} />,\r\n            <Academic callback={this.callback} />,\r\n            <Social callback={this.callback} />,\r\n            <Normal callback={this.callback} />, <Result data={this.state} />];\r\n        return (\r\n            <div className=\"App\">\r\n                <Jump change={this.jumpSer.bind(this)} num={this.state.point} />\r\n                <div className='inputArea'>\r\n                    {temp[this.state.ser]}\r\n                </div>\r\n                <div className='buttonArea'>\r\n                    {this.state.ser > 0\r\n                        && <button className='button button-left' value='sub' onClick={this.changeSer.bind(this)}>上一步</button>}\r\n                    {this.state.ser < 4\r\n                        && <button className='button button-right' value='add' onClick={this.changeSer.bind(this)}>下一步</button>}\r\n                </div>\r\n                <TopButton />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nvar isLocalhost = Boolean(window.location.hostname === 'localhost' ||\n// [::1] is the IPv6 localhost address.\nwindow.location.hostname === '[::1]' ||\n// 127.0.0.0/8 are considered localhost for IPv4.\nwindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    var publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', function () {\n      var swUrl = process.env.PUBLIC_URL + '/service-worker.js';\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(function () {\n          console.log('This web app is being served cache-first by a service ' + 'worker. To learn more, visit https://bit.ly/CRA-PWA');\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker.register(swUrl).then(function (registration) {\n    registration.onupdatefound = function () {\n      var installingWorker = registration.installing;\n      if (installingWorker == null) {\n        return;\n      }\n      installingWorker.onstatechange = function () {\n        if (installingWorker.state === 'installed') {\n          if (navigator.serviceWorker.controller) {\n            // At this point, the updated precached content has been fetched,\n            // but the previous service worker will still serve the older\n            // content until all client tabs are closed.\n            console.log('New content is available and will be used when all ' + 'tabs for this page are closed. See https://bit.ly/CRA-PWA.');\n\n            // Execute callback\n            if (config && config.onUpdate) {\n              config.onUpdate(registration);\n            }\n          } else {\n            // At this point, everything has been precached.\n            // It's the perfect time to display a\n            // \"Content is cached for offline use.\" message.\n            console.log('Content is cached for offline use.');\n\n            // Execute callback\n            if (config && config.onSuccess) {\n              config.onSuccess(registration);\n            }\n          }\n        }\n      };\n    };\n  }).catch(function (error) {\n    console.error('Error during service worker registration:', error);\n  });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  }).then(function (response) {\n    // Ensure service worker exists, and that we really are getting a JS file.\n    var contentType = response.headers.get('content-type');\n    if (response.status === 404 || contentType != null && contentType.indexOf('javascript') === -1) {\n      // No service worker found. Probably a different app. Reload the page.\n      navigator.serviceWorker.ready.then(function (registration) {\n        registration.unregister().then(function () {\n          window.location.reload();\n        });\n      });\n    } else {\n      // Service worker found. Proceed as normal.\n      registerValidSW(swUrl, config);\n    }\n  }).catch(function () {\n    console.log('No internet connection found. App is running in offline mode.');\n  });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(function (registration) {\n      registration.unregister();\n    }).catch(function (error) {\n      console.error(error.message);\n    });\n  }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(React.createElement(\n    React.StrictMode,\n    null,\n    React.createElement(App, null)\n), document.getElementById('root'));\n\nserviceWorker.register();"],"sourceRoot":""}
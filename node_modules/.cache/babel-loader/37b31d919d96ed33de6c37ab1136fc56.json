{"ast":null,"code":"var _jsxFileName = \"E:\\\\project\\\\front\\\\tmd\\\\src\\\\components\\\\result.js\";\nimport React from 'react';\nimport './CSS/result.css';\nimport sha256 from 'js-sha256';\nimport data from './data/intro.json';\nimport html2canvas from 'html2canvas';\nvar transName = data.transName;\n\nclass Result extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: props.data\n    };\n    this.handleData = this.handleData.bind(this);\n  }\n\n  handleData(name) {\n    if (!(name in this.state.data)) return;\n    let res = [/*#__PURE__*/React.createElement(\"div\", {\n      className: \"resultTitle\",\n      id: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 20\n      }\n    }, transName[name])];\n    let data = this.state.data[name];\n\n    for (let i in data) res.push( /*#__PURE__*/React.createElement(\"div\", {\n      className: \"resultItems\",\n      id: sha256(i),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 17\n      }\n    }, i), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"resultItemsNum\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 17\n      }\n    }, data[i])));\n\n    return res;\n  }\n\n  handleSrnShot() {\n    let des = document.getElementById('result');\n    let css = window.getComputedStyle(des, null);\n\n    let f = name => parseFloat(css[name].substring(0, css['height'].length - 2));\n\n    html2canvas(des, {\n      useCORS: true,\n      width: f('width') + 50,\n      height: f('height'),\n      windowWidth: des.scrollWidth,\n      windowHeight: des.scrollHeight,\n      x: 0\n    }).then(canvas => {\n      const base64Img = canvas.toDataURL('image/png', 1);\n\n      try {\n        let a = document.createElement('a');\n        a.download = 'test.png';\n        a.href = base64Img;\n        a.click();\n      } catch (e) {\n        console.log(e);\n      }\n    });\n  }\n\n  render() {\n    let basic = { ...this.state.data['Basic']\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleSrnShot.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }\n    }, \"\\u7ED3\\u679C\"), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"result\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"resultBasic\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"resultBasicTable\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"resultBasicItems\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 25\n      }\n    }, \"\\u59D3\\u540D\\uFF1A\", /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 32\n      }\n    }, basic.name)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"resultBasicItems\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 25\n      }\n    }, \"\\u6027\\u683C\\uFF1A\", /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 32\n      }\n    }, basic.character)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"resultBasicItems\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 25\n      }\n    }, \"\\u4E3B\\u6B66\\u5668\\uFF1A\", /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 33\n      }\n    }, basic.weapon))), /*#__PURE__*/React.createElement(\"img\", {\n      src: basic.image,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"resultTable\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }\n    }, this.handleData('Property'), this.handleData('Academic'), this.handleData('Normal')), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"backgroundStory\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }\n    }, \"\\u80CC\\u666F\\u6545\\u4E8B\"), /*#__PURE__*/React.createElement(\"article\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }\n    }, basic.background))));\n  }\n\n}\n\nexport default Result;","map":{"version":3,"sources":["E:/project/front/tmd/src/components/result.js"],"names":["React","sha256","data","html2canvas","transName","Result","Component","constructor","props","state","handleData","bind","name","res","i","push","handleSrnShot","des","document","getElementById","css","window","getComputedStyle","f","parseFloat","substring","length","useCORS","width","height","windowWidth","scrollWidth","windowHeight","scrollHeight","x","then","canvas","base64Img","toDataURL","a","createElement","download","href","click","e","console","log","render","basic","character","weapon","image","background"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './CSS/result.css'\r\nimport sha256 from 'js-sha256'\r\nimport data from './data/intro.json'\r\nimport html2canvas from 'html2canvas'\r\n\r\nvar transName = data.transName;\r\n\r\nclass Result extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            data: props.data,\r\n        };\r\n        this.handleData = this.handleData.bind(this);\r\n    }\r\n\r\n    handleData(name) {\r\n        if (!(name in this.state.data)) return;\r\n        let res = [<div className='resultTitle' id='title'>{transName[name]}</div>];\r\n        let data = this.state.data[name];\r\n        for (let i in data) res.push(\r\n            <div className='resultItems'\r\n                id={sha256(i)}>\r\n                <p>{i}</p>\r\n                <p className='resultItemsNum'>{data[i]}</p>\r\n            </div>);\r\n        return res;\r\n    }\r\n\r\n    handleSrnShot() {\r\n        let des = document.getElementById('result');\r\n        let css = window.getComputedStyle(des, null);\r\n        let f = (name) => parseFloat(css[name].substring(0, css['height'].length - 2));\r\n        html2canvas(des, {\r\n            useCORS: true,\r\n            width: f('width') + 50,\r\n            height: f('height'),\r\n            windowWidth: des.scrollWidth,\r\n            windowHeight: des.scrollHeight,\r\n            x: 0,\r\n        }).then(canvas => {\r\n            const base64Img = canvas.toDataURL('image/png', 1);\r\n\r\n            try {\r\n                let a = document.createElement('a');\r\n                a.download = 'test.png';\r\n                a.href = base64Img;\r\n                a.click();\r\n            } catch (e) {\r\n                console.log(e);\r\n            }\r\n        });\r\n    }\r\n\r\n    render() {\r\n        let basic = { ...this.state.data['Basic'] };\r\n        return (<div>\r\n            <button onClick={this.handleSrnShot.bind(this)} />\r\n            <div className='title'>结果</div>\r\n            <div id='result'>\r\n                <div className='resultBasic'>\r\n                    <div className='resultBasicTable'>\r\n                        <div className='resultBasicItems'>\r\n                            姓名：<p>{basic.name}</p>\r\n                        </div>\r\n                        <div className='resultBasicItems'>\r\n                            性格：<p>{basic.character}</p>\r\n                        </div>\r\n                        <div className='resultBasicItems'>\r\n                            主武器：<p>{basic.weapon}</p>\r\n                        </div>\r\n                    </div>\r\n                    <img src={basic.image} />\r\n                </div>\r\n                <div className='resultTable'>\r\n                    {this.handleData('Property')}\r\n                    {this.handleData('Academic')}\r\n                    {this.handleData('Normal')}\r\n                </div>\r\n                <div className='backgroundStory'>\r\n                    <h2>背景故事</h2>\r\n                    <article>\r\n                        {basic.background}\r\n                    </article>\r\n                </div>\r\n            </div>\r\n        </div>);\r\n    }\r\n}\r\n\r\nexport default Result;"]},"metadata":{},"sourceType":"module"}
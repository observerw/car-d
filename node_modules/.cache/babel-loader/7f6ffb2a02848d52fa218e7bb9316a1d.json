{"ast":null,"code":"import _defineProperty from\"E:\\\\project\\\\front\\\\tmd\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _assertThisInitialized from\"E:\\\\project\\\\front\\\\tmd\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _classCallCheck from\"E:\\\\project\\\\front\\\\tmd\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\project\\\\front\\\\tmd\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\project\\\\front\\\\tmd\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\project\\\\front\\\\tmd\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import sha256 from'js-sha256';import'./CSS/prop.css';var temp={};var PropItem=/*#__PURE__*/function(_React$Component){_inherits(PropItem,_React$Component);var _super=_createSuper(PropItem);function PropItem(props){var _this;_classCallCheck(this,PropItem);_this=_super.call(this,props);_this.state={num:props.value};_this.name=props.name;_this.total=props.callback.total;//总点数回调\n_this.partial=props.callback.partial;//类别统计回调\n_this.partial(_this.name,_this.state.num);return _this;}_createClass(PropItem,[{key:\"changeNum\",value:function changeNum(e){//由上层函数判断操作合法性\n//如果操作合法，则改变当前对象的值\nvar n=this.state.num+this.total(e,this.state.num);this.partial(this.name,n);this.setState({num:n});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{className:\"propItem\"},/*#__PURE__*/React.createElement(\"div\",{className:\"propName\"},this.name),/*#__PURE__*/React.createElement(\"div\",{className:\"propCtrl\"},/*#__PURE__*/React.createElement(\"button\",{className:\"propBtn propBtn-left\",value:\"sub\",onClick:this.changeNum.bind(this)},\" - \"),/*#__PURE__*/React.createElement(\"div\",{className:\"propNum\"},this.state.num),/*#__PURE__*/React.createElement(\"button\",{className:\"propBtn propBtn-right\",value:\"add\",onClick:this.changeNum.bind(this)},\" + \"))));}}]);return PropItem;}(React.Component);var PropTable=/*#__PURE__*/function(_React$Component2){_inherits(PropTable,_React$Component2);var _super2=_createSuper(PropTable);function PropTable(props){var _this2;_classCallCheck(this,PropTable);_this2=_super2.call(this,props);_this2.items=props.items;_this2.submit=props.callback.submit;_this2.name=props.name;_this2.callback={total:props.callback.cost,partial:_this2.handleCost.bind(_assertThisInitialized(_this2))};if(!(_this2.name in temp))temp[_this2.name]={};_this2.state=temp[_this2.name];_this2.res=_this2.items.map(function(i){return/*#__PURE__*/React.createElement(PropItem,{name:i,value:i in _this2.state?_this2.state[i]:0,key:sha256(i),callback:_this2.callback});});return _this2;}_createClass(PropTable,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){for(var i in this.state){temp[this.name][i]=this.state[i];}this.submit(this.state,this.name);}},{key:\"handleCost\",value:function handleCost(name,num){this.setState(_defineProperty({},name,num));this.submit(this.state,this.name);}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"propArea\"},/*#__PURE__*/React.createElement(\"div\",{className:\"title\"},PropTable.transName[this.name]),/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"tbody\",null,this.res)));}}]);return PropTable;}(React.Component);PropTable.transName={Academic:'学术能力',Social:'社交能力',Normal:'普通能力'};function Academic(props){var items=['会计','人类学','考古学','建筑学','艺术史','生物学','密码学','地质学','克苏鲁神话','历史','语言','法律','文献查阅','医学','神秘学','物理学','神学'];return/*#__PURE__*/React.createElement(PropTable,{items:items,callback:props.callback,name:\"Academic\"});}function Social(props){var items=['察言观色','议价','官僚','警方交谈','信誉','奉承','审讯','威胁','口述采访','安抚','底层社会'];return/*#__PURE__*/React.createElement(PropTable,{items:items,callback:props.callback,name:\"Social\"});}function Normal(props){var items=['运动','藏匿','伪装','驾驶','电器维修','爆破','偷窃','枪械','急救','逃脱','健康','催眠','机械维修','导航','物品整备','精神分析','骑术','心智','坚毅','搏击','警觉','追踪','潜行','近战武器'];return/*#__PURE__*/React.createElement(PropTable,{items:items,callback:props.callback,name:\"Normal\"});}export{Academic,Social,Normal};","map":{"version":3,"sources":["E:/project/front/tmd/src/components/prop.js"],"names":["React","sha256","temp","PropItem","props","state","num","value","name","total","callback","partial","e","n","setState","changeNum","bind","Component","PropTable","items","submit","cost","handleCost","res","map","i","transName","Academic","Social","Normal"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport sha256 from 'js-sha256'\r\nimport './CSS/prop.css'\r\nvar temp = {};\r\n\r\nclass PropItem extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            num: props.value,\r\n        }\r\n        this.name = props.name;\r\n        this.total = props.callback.total;   //总点数回调\r\n        this.partial = props.callback.partial;   //类别统计回调\r\n        this.partial(this.name, this.state.num);\r\n    }\r\n\r\n    changeNum(e) {\r\n        //由上层函数判断操作合法性\r\n        //如果操作合法，则改变当前对象的值\r\n        let n = this.state.num + this.total(e, this.state.num);\r\n        this.partial(this.name, n);\r\n        this.setState({ num: n });\r\n    }\r\n\r\n    render() {\r\n        return <tr>\r\n            <td className='propItem'>\r\n                <div className='propName'>\r\n                    {this.name}\r\n                </div>\r\n                <div className='propCtrl'>\r\n                    <button className='propBtn propBtn-left' value='sub' onClick={this.changeNum.bind(this)} > - </button>\r\n                    <div className='propNum'>\r\n                        {this.state.num}\r\n                    </div>\r\n                    <button className='propBtn propBtn-right' value='add' onClick={this.changeNum.bind(this)} > + </button>\r\n                </div>\r\n            </td>\r\n        </tr>;\r\n    }\r\n}\r\n\r\nclass PropTable extends React.Component {\r\n    static transName = {\r\n        Academic: '学术能力',\r\n        Social: '社交能力',\r\n        Normal: '普通能力'\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.items = props.items;\r\n        this.submit = props.callback.submit;\r\n        this.name = props.name;\r\n\r\n        this.callback = {\r\n            total: props.callback.cost,\r\n            partial: this.handleCost.bind(this)\r\n        }\r\n\r\n        if (!(this.name in temp)) temp[this.name] = {};\r\n        this.state = temp[this.name];\r\n        this.res = this.items.map((i) => {\r\n            return <PropItem name={i} value={i in this.state ? this.state[i] : 0}\r\n                key={sha256(i)} callback={this.callback} />;\r\n        })\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        for (let i in this.state) temp[this.name][i] = this.state[i];\r\n        this.submit(this.state, this.name);\r\n    }\r\n\r\n    handleCost(name, num) {\r\n        this.setState({ [name]: num });\r\n        this.submit(this.state, this.name);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className='propArea'>\r\n                <div className='title'>{PropTable.transName[this.name]}</div>\r\n                <table>\r\n                    <tbody>\r\n                        {this.res}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction Academic(props) {\r\n    var items = ['会计', '人类学', '考古学', '建筑学', '艺术史', '生物学', '密码学', '地质学', '克苏鲁神话', '历史', '语言', '法律', '文献查阅', '医学', '神秘学', '物理学', '神学'];\r\n\r\n    return <PropTable items={items} callback={props.callback} name='Academic' />;\r\n}\r\nfunction Social(props) {\r\n    var items = ['察言观色', '议价', '官僚', '警方交谈', '信誉', '奉承', '审讯', '威胁', '口述采访', '安抚', '底层社会'];\r\n\r\n    return <PropTable items={items} callback={props.callback} name='Social' />;\r\n}\r\n\r\nfunction Normal(props) {\r\n    var items = ['运动', '藏匿', '伪装', '驾驶', '电器维修', '爆破', '偷窃', '枪械', '急救', '逃脱', '健康', '催眠', '机械维修', '导航', '物品整备', '精神分析', '骑术', '心智', '坚毅', '搏击', '警觉', '追踪', '潜行', '近战武器'];\r\n\r\n    return <PropTable items={items} callback={props.callback} name='Normal' />;\r\n}\r\nexport {\r\n    Academic,\r\n    Social,\r\n    Normal,\r\n};"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"E:\\\\project\\\\front\\\\tmd\\\\src\\\\components\\\\prop.js\";\nimport React from 'react';\nimport sha256 from 'js-sha256';\nimport ReactTooltip from 'react-tooltip';\nimport './CSS/prop.css';\nimport data from './data/intro.json';\nvar temp = {};\nvar transName = {\n  Academic: '学术能力',\n  Social: '社交能力',\n  Technique: '技术能力',\n  Normal: '普通能力'\n};\n\nclass PropItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      num: props.value,\n      isPrompt: false\n    };\n    this.name = props.name;\n    this.class = props.class;\n    this.intro = data[transName[this.class]][this.name];\n    this.total = props.callback.total; //总点数回调\n\n    this.partial = props.callback.partial; //类别统计回调\n\n    this.partial(this.name, this.state.num);\n  }\n\n  handlePrompt() {\n    this.setState({\n      isPrompt: true\n    });\n  }\n\n  changeNum(e) {\n    //由上层函数判断操作合法性\n    //如果操作合法，则改变当前对象的值\n    let n = this.state.num + this.total(e, this.state.num);\n    this.partial(this.name, n);\n    this.setState({\n      num: n\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      className: \"propItem\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ReactTooltip, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", Object.assign({\n      className: \"propName\",\n      \"data-tip\": this.intro\n    }, PropItem.tipStyle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }\n    }), this.name), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"propCtrl\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"propBtn propBtn-left\",\n      value: \"sub\",\n      onClick: this.changeNum.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 21\n      }\n    }, \" - \"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"propNum\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 21\n      }\n    }, this.state.num), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"propBtn propBtn-right\",\n      value: \"add\",\n      onClick: this.changeNum.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 21\n      }\n    }, \" + \"))));\n  }\n\n}\n\nPropItem.tipStyle = {\n  \"data-place\": \"right\",\n  \"data-type\": \"info\",\n  \"data-background-color\": \"white\",\n  \"data-text-color\": \"rgb(0, 0, 0, 0.65)\",\n  \"data-class\": \"tips\"\n};\n\nclass PropTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.submit = props.callback.submit;\n    this.name = props.name;\n    this.items = [Object.keys(data[transName[this.name]])];\n    console.log(this.items);\n    this.callback = {\n      total: props.callback.cost,\n      partial: this.handleCost.bind(this)\n    };\n    if (!(this.name in temp)) temp[this.name] = {};\n    this.state = temp[this.name];\n    this.res = this.items.map(i => {\n      return /*#__PURE__*/React.createElement(PropItem, {\n        class: this.name,\n        name: i,\n        value: i in this.state ? this.state[i] : 0,\n        key: sha256(i),\n        callback: this.callback,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 20\n        }\n      });\n    });\n  }\n\n  componentWillUnmount() {\n    for (let i in this.state) temp[this.name][i] = this.state[i];\n\n    this.submit(this.state, this.name);\n  }\n\n  handleCost(name, num) {\n    this.setState({\n      [name]: num\n    });\n    this.submit(this.state, this.name);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"propArea\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }\n    }, transName[this.name]), /*#__PURE__*/React.createElement(\"table\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }\n    }, this.res)));\n  }\n\n}\n\nexport default PropTable;","map":{"version":3,"sources":["E:/project/front/tmd/src/components/prop.js"],"names":["React","sha256","ReactTooltip","data","temp","transName","Academic","Social","Technique","Normal","PropItem","Component","constructor","props","state","num","value","isPrompt","name","class","intro","total","callback","partial","handlePrompt","setState","changeNum","e","n","render","tipStyle","bind","PropTable","submit","items","Object","keys","console","log","cost","handleCost","res","map","i","componentWillUnmount"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,YAAP,MAAyB,eAAzB;AACA,OAAO,gBAAP;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,IAAIC,IAAI,GAAG,EAAX;AACA,IAAIC,SAAS,GAAG;AACZC,EAAAA,QAAQ,EAAE,MADE;AAEZC,EAAAA,MAAM,EAAE,MAFI;AAGZC,EAAAA,SAAS,EAAE,MAHC;AAIZC,EAAAA,MAAM,EAAE;AAJI,CAAhB;;AAOA,MAAMC,QAAN,SAAuBV,KAAK,CAACW,SAA7B,CAAuC;AASnCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACTC,MAAAA,GAAG,EAAEF,KAAK,CAACG,KADF;AAETC,MAAAA,QAAQ,EAAE;AAFD,KAAb;AAIA,SAAKC,IAAL,GAAYL,KAAK,CAACK,IAAlB;AACA,SAAKC,KAAL,GAAaN,KAAK,CAACM,KAAnB;AACA,SAAKC,KAAL,GAAajB,IAAI,CAACE,SAAS,CAAC,KAAKc,KAAN,CAAV,CAAJ,CAA4B,KAAKD,IAAjC,CAAb;AACA,SAAKG,KAAL,GAAaR,KAAK,CAACS,QAAN,CAAeD,KAA5B,CATe,CASsB;;AACrC,SAAKE,OAAL,GAAeV,KAAK,CAACS,QAAN,CAAeC,OAA9B,CAVe,CAU0B;;AACzC,SAAKA,OAAL,CAAa,KAAKL,IAAlB,EAAwB,KAAKJ,KAAL,CAAWC,GAAnC;AACH;;AAEDS,EAAAA,YAAY,GAAG;AACX,SAAKC,QAAL,CAAc;AAAER,MAAAA,QAAQ,EAAE;AAAZ,KAAd;AACH;;AAEDS,EAAAA,SAAS,CAACC,CAAD,EAAI;AACT;AACA;AACA,QAAIC,CAAC,GAAG,KAAKd,KAAL,CAAWC,GAAX,GAAiB,KAAKM,KAAL,CAAWM,CAAX,EAAc,KAAKb,KAAL,CAAWC,GAAzB,CAAzB;AACA,SAAKQ,OAAL,CAAa,KAAKL,IAAlB,EAAwBU,CAAxB;AACA,SAAKH,QAAL,CAAc;AAAEV,MAAAA,GAAG,EAAEa;AAAP,KAAd;AACH;;AAEDC,EAAAA,MAAM,GAAG;AACL,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACH;AAAI,MAAA,SAAS,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAEI;AAAK,MAAA,SAAS,EAAC,UAAf;AAA0B,kBAAU,KAAKT;AAAzC,OAAoDV,QAAQ,CAACoB,QAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QACK,KAAKZ,IADV,CAFJ,eAKI;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAQ,MAAA,SAAS,EAAC,sBAAlB;AAAyC,MAAA,KAAK,EAAC,KAA/C;AAAqD,MAAA,OAAO,EAAE,KAAKQ,SAAL,CAAeK,IAAf,CAAoB,IAApB,CAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ,eAEI;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKjB,KAAL,CAAWC,GADhB,CAFJ,eAKI;AAAQ,MAAA,SAAS,EAAC,uBAAlB;AAA0C,MAAA,KAAK,EAAC,KAAhD;AAAsD,MAAA,OAAO,EAAE,KAAKW,SAAL,CAAeK,IAAf,CAAoB,IAApB,CAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aALJ,CALJ,CADG,CAAP;AAeH;;AAnDkC;;AAAjCrB,Q,CACKoB,Q,GAAW;AACd,gBAAc,OADA;AAEd,eAAa,MAFC;AAGd,2BAAyB,OAHX;AAId,qBAAmB,oBAJL;AAKd,gBAAc;AALA,C;;AAqDtB,MAAME,SAAN,SAAwBhC,KAAK,CAACW,SAA9B,CAAwC;AACpCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKoB,MAAL,GAAcpB,KAAK,CAACS,QAAN,CAAeW,MAA7B;AACA,SAAKf,IAAL,GAAYL,KAAK,CAACK,IAAlB;AACA,SAAKgB,KAAL,GAAa,CAACC,MAAM,CAACC,IAAP,CAAYjC,IAAI,CAACE,SAAS,CAAC,KAAKa,IAAN,CAAV,CAAhB,CAAD,CAAb;AACAmB,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKJ,KAAjB;AAEA,SAAKZ,QAAL,GAAgB;AACZD,MAAAA,KAAK,EAAER,KAAK,CAACS,QAAN,CAAeiB,IADV;AAEZhB,MAAAA,OAAO,EAAE,KAAKiB,UAAL,CAAgBT,IAAhB,CAAqB,IAArB;AAFG,KAAhB;AAKA,QAAI,EAAE,KAAKb,IAAL,IAAad,IAAf,CAAJ,EAA0BA,IAAI,CAAC,KAAKc,IAAN,CAAJ,GAAkB,EAAlB;AAC1B,SAAKJ,KAAL,GAAaV,IAAI,CAAC,KAAKc,IAAN,CAAjB;AACA,SAAKuB,GAAL,GAAW,KAAKP,KAAL,CAAWQ,GAAX,CAAgBC,CAAD,IAAO;AAC7B,0BAAO,oBAAC,QAAD;AAAU,QAAA,KAAK,EAAE,KAAKzB,IAAtB;AAA4B,QAAA,IAAI,EAAEyB,CAAlC;AAAqC,QAAA,KAAK,EAAEA,CAAC,IAAI,KAAK7B,KAAV,GAAkB,KAAKA,KAAL,CAAW6B,CAAX,CAAlB,GAAkC,CAA9E;AACH,QAAA,GAAG,EAAE1C,MAAM,CAAC0C,CAAD,CADR;AACa,QAAA,QAAQ,EAAE,KAAKrB,QAD5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AAEH,KAHU,CAAX;AAIH;;AAEDsB,EAAAA,oBAAoB,GAAG;AACnB,SAAK,IAAID,CAAT,IAAc,KAAK7B,KAAnB,EAA0BV,IAAI,CAAC,KAAKc,IAAN,CAAJ,CAAgByB,CAAhB,IAAqB,KAAK7B,KAAL,CAAW6B,CAAX,CAArB;;AAC1B,SAAKV,MAAL,CAAY,KAAKnB,KAAjB,EAAwB,KAAKI,IAA7B;AACH;;AAEDsB,EAAAA,UAAU,CAACtB,IAAD,EAAOH,GAAP,EAAY;AAClB,SAAKU,QAAL,CAAc;AAAE,OAACP,IAAD,GAAQH;AAAV,KAAd;AACA,SAAKkB,MAAL,CAAY,KAAKnB,KAAjB,EAAwB,KAAKI,IAA7B;AACH;;AAEDW,EAAAA,MAAM,GAAG;AACL,wBACI;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAwBxB,SAAS,CAAC,KAAKa,IAAN,CAAjC,CADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKuB,GADV,CADJ,CAFJ,CADJ;AAUH;;AA1CmC;;AA4CxC,eAAeT,SAAf","sourcesContent":["import React from 'react';\r\nimport sha256 from 'js-sha256'\r\nimport ReactTooltip from 'react-tooltip'\r\nimport './CSS/prop.css'\r\nimport data from './data/intro.json'\r\nvar temp = {};\r\nvar transName = {\r\n    Academic: '学术能力',\r\n    Social: '社交能力',\r\n    Technique: '技术能力',\r\n    Normal: '普通能力'\r\n}\r\n\r\nclass PropItem extends React.Component {\r\n    static tipStyle = {\r\n        \"data-place\": \"right\",\r\n        \"data-type\": \"info\",\r\n        \"data-background-color\": \"white\",\r\n        \"data-text-color\": \"rgb(0, 0, 0, 0.65)\",\r\n        \"data-class\": \"tips\"\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            num: props.value,\r\n            isPrompt: false,\r\n        }\r\n        this.name = props.name;\r\n        this.class = props.class;\r\n        this.intro = data[transName[this.class]][this.name];\r\n        this.total = props.callback.total;   //总点数回调\r\n        this.partial = props.callback.partial;   //类别统计回调\r\n        this.partial(this.name, this.state.num);\r\n    }\r\n\r\n    handlePrompt() {\r\n        this.setState({ isPrompt: true })\r\n    }\r\n\r\n    changeNum(e) {\r\n        //由上层函数判断操作合法性\r\n        //如果操作合法，则改变当前对象的值\r\n        let n = this.state.num + this.total(e, this.state.num);\r\n        this.partial(this.name, n);\r\n        this.setState({ num: n });\r\n    }\r\n\r\n    render() {\r\n        return <tr>\r\n            <td className='propItem'>\r\n                <ReactTooltip />\r\n                <div className='propName' data-tip={this.intro} {...PropItem.tipStyle}>\r\n                    {this.name}\r\n                </div>\r\n                <div className='propCtrl'>\r\n                    <button className='propBtn propBtn-left' value='sub' onClick={this.changeNum.bind(this)} > - </button>\r\n                    <div className='propNum'>\r\n                        {this.state.num}\r\n                    </div>\r\n                    <button className='propBtn propBtn-right' value='add' onClick={this.changeNum.bind(this)} > + </button>\r\n                </div>\r\n            </td>\r\n        </tr>;\r\n    }\r\n}\r\n\r\nclass PropTable extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.submit = props.callback.submit;\r\n        this.name = props.name;\r\n        this.items = [Object.keys(data[transName[this.name]])];\r\n        console.log(this.items);\r\n\r\n        this.callback = {\r\n            total: props.callback.cost,\r\n            partial: this.handleCost.bind(this)\r\n        }\r\n\r\n        if (!(this.name in temp)) temp[this.name] = {};\r\n        this.state = temp[this.name];\r\n        this.res = this.items.map((i) => {\r\n            return <PropItem class={this.name} name={i} value={i in this.state ? this.state[i] : 0}\r\n                key={sha256(i)} callback={this.callback} />;\r\n        })\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        for (let i in this.state) temp[this.name][i] = this.state[i];\r\n        this.submit(this.state, this.name);\r\n    }\r\n\r\n    handleCost(name, num) {\r\n        this.setState({ [name]: num });\r\n        this.submit(this.state, this.name);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className='propArea'>\r\n                <div className='title'>{transName[this.name]}</div>\r\n                <table>\r\n                    <tbody>\r\n                        {this.res}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default PropTable;"]},"metadata":{},"sourceType":"module"}
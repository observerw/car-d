{"ast":null,"code":"import _defineProperty from\"E:\\\\project\\\\front\\\\tmd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"E:\\\\project\\\\front\\\\tmd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\project\\\\front\\\\tmd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"E:\\\\project\\\\front\\\\tmd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"E:\\\\project\\\\front\\\\tmd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\project\\\\front\\\\tmd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{createRef}from'react';import sha256 from'js-sha256';import'./CSS/basic.css';import Popover from'react-popover';var Basic=/*#__PURE__*/function(_React$Component){_inherits(Basic,_React$Component);var _super=_createSuper(Basic);function Basic(props){var _this;_classCallCheck(this,Basic);_this=_super.call(this,props);_this.state=Basic.temp;_this.submit=props.submit;_this.fileInput=createRef();_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.handleImage=_this.handleImage.bind(_assertThisInitialized(_this));return _this;}_createClass(Basic,[{key:\"handleSubmit\",value:function handleSubmit(e){//自适应高度\nif(e.target.type=='textarea'){e.target.style['height']='auto';e.target.style['height']=e.target.scrollHeight+'px';}this.setState(_defineProperty({},e.target.name,e.target.value));}},{key:\"handleImage\",value:function handleImage(e){var src=e.target.files[0]?window.URL.createObjectURL(e.target.files[0]):' ';this.fileInput.current.src=src;this.setState({image:src});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){for(var i in this.state){Basic.temp[i]=this.state[i];}this.submit(this.state,'Basic');//上传basic数据\n}},{key:\"geneInput\",value:function geneInput(title,name){var sta=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var temp;if(sta===0)temp=/*#__PURE__*/React.createElement(\"input\",{className:\"input\",name:name,value:this.state[name],onChange:this.handleSubmit});if(sta===1)temp=/*#__PURE__*/React.createElement(\"textarea\",{className:\"input inputTextarea\",name:name,value:this.state[name],onChange:this.handleSubmit});return/*#__PURE__*/React.createElement(\"div\",{className:\"inputField\",key:sha256(name)},/*#__PURE__*/React.createElement(\"div\",{className:\"itemName\"},title,\"\\uFF1A\"),temp);}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"basicInput\"},/*#__PURE__*/React.createElement(\"div\",{className:\"title\"},\"\\u57FA\\u672C\\u4FE1\\u606F\"),[this.geneInput('调查员姓名','name'),this.geneInput('职业','occupation'),this.geneInput('性格特征','character'),this.geneInput('背景故事','background',1)],/*#__PURE__*/React.createElement(\"div\",{className:\"inputField\"},/*#__PURE__*/React.createElement(\"div\",{className:\"itemName\"},\"\\u5934\\u50CF\\uFF1A\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input imgInput\"},/*#__PURE__*/React.createElement(\"p\",null,\"\\u70B9\\u51FB\\u6B64\\u5904\\u4E0A\\u4F20\\u56FE\\u7247\"),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",accept:\"image/*\",id:\"rawImgInput\",name:\"image\",onChange:this.handleImage})),/*#__PURE__*/React.createElement(\"img\",{id:\"preview\",ref:this.fileInput})));}}]);return Basic;}(React.Component);Basic.temp={name:'',occupation:'',character:'',background:'',image:' '};export default Basic;","map":{"version":3,"sources":["E:/project/front/tmd/src/components/basic.js"],"names":["React","createRef","sha256","Popover","Basic","props","state","temp","submit","fileInput","handleSubmit","bind","handleImage","e","target","type","style","scrollHeight","setState","name","value","src","files","window","URL","createObjectURL","current","image","i","title","sta","geneInput","Component","occupation","character","background"],"mappings":"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","sourcesContent":["import React, { createRef } from 'react'\r\nimport sha256 from 'js-sha256'\r\nimport './CSS/basic.css'\r\nimport Popover from 'react-popover'\r\n\r\nclass Basic extends React.Component {\r\n    static temp = {\r\n        name: '',\r\n        occupation: '',\r\n        character: '',\r\n        background: '',\r\n        image: ' ',\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = Basic.temp;\r\n        this.submit = props.submit;\r\n        this.fileInput = createRef();\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleImage = this.handleImage.bind(this);\r\n    }\r\n\r\n    handleSubmit(e) {\r\n        //自适应高度\r\n        if (e.target.type == 'textarea') {\r\n            e.target.style['height'] = 'auto';\r\n            e.target.style['height'] = e.target.scrollHeight + 'px';\r\n        }\r\n        this.setState({ [e.target.name]: e.target.value });\r\n    }\r\n\r\n    handleImage(e) {\r\n        let src = e.target.files[0] ? window.URL.createObjectURL(e.target.files[0]) : ' ';\r\n        this.fileInput.current.src = src;\r\n        this.setState({ image: src });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        for (let i in this.state)\r\n            Basic.temp[i] = this.state[i];\r\n        this.submit(this.state, 'Basic');\r\n        //上传basic数据\r\n    }\r\n\r\n    geneInput(title, name, sta = 0) {\r\n        let temp;\r\n        if (sta === 0) temp = <input className='input' name={name} value={this.state[name]} onChange={this.handleSubmit} />;\r\n        if (sta === 1) temp = <textarea className='input inputTextarea' name={name} value={this.state[name]} onChange={this.handleSubmit} />;\r\n        return (<div className='inputField' key={sha256(name)}>\r\n            <div className='itemName'>{title}：</div>\r\n            {temp}\r\n        </div>);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className='basicInput'>\r\n                <div className='title'>基本信息</div>\r\n                {[this.geneInput('调查员姓名', 'name'),\r\n                this.geneInput('职业', 'occupation'),\r\n                this.geneInput('性格特征', 'character'),\r\n                this.geneInput('背景故事', 'background', 1)]}\r\n\r\n                <div className='inputField'>\r\n                    <div className='itemName'>头像：</div>\r\n                    <div className='input imgInput' >\r\n                        <p>点击此处上传图片</p>\r\n                        <input\r\n                            type='file'\r\n                            accept='image/*'\r\n                            id='rawImgInput' name='image'\r\n                            onChange={this.handleImage}\r\n                        />\r\n                    </div>\r\n\r\n                    <img id='preview' ref={this.fileInput}></img>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Basic;"]},"metadata":{},"sourceType":"module"}
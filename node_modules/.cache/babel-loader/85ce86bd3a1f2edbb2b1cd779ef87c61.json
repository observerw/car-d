{"ast":null,"code":"import _defineProperty from\"E:\\\\project\\\\front\\\\tmd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _assertThisInitialized from\"E:\\\\project\\\\front\\\\tmd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _classCallCheck from\"E:\\\\project\\\\front\\\\tmd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\project\\\\front\\\\tmd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\project\\\\front\\\\tmd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\project\\\\front\\\\tmd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import sha256 from'js-sha256';import ReactTooltip from'react-tooltip';import'./CSS/prop.css';import data from'./data/prompt.json';var temp={};var transName={Academic:'学术能力',Social:'社交能力',Normal:'普通能力'};var PropItem=/*#__PURE__*/function(_React$Component){_inherits(PropItem,_React$Component);var _super=_createSuper(PropItem);function PropItem(props){var _this;_classCallCheck(this,PropItem);_this=_super.call(this,props);_this.state={num:props.value,isPrompt:false};_this.name=props.name;_this.class=props.class;_this.intro=data[transName[_this.class]][_this.name];_this.total=props.callback.total;//总点数回调\n_this.partial=props.callback.partial;//类别统计回调\n_this.partial(_this.name,_this.state.num);return _this;}_createClass(PropItem,[{key:\"handlePrompt\",value:function handlePrompt(){this.setState({isPrompt:true});}},{key:\"changeNum\",value:function changeNum(e){//由上层函数判断操作合法性\n//如果操作合法，则改变当前对象的值\nvar n=this.state.num+this.total(e,this.state.num);this.partial(this.name,n);this.setState({num:n});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{className:\"propItem\"},/*#__PURE__*/React.createElement(ReactTooltip,null),/*#__PURE__*/React.createElement(\"div\",Object.assign({className:\"propName\",\"data-tip\":this.intro},PropItem.tipStyle),this.name),/*#__PURE__*/React.createElement(\"div\",{className:\"propCtrl\"},/*#__PURE__*/React.createElement(\"button\",{className:\"propBtn propBtn-left\",value:\"sub\",onClick:this.changeNum.bind(this)},\" - \"),/*#__PURE__*/React.createElement(\"div\",{className:\"propNum\"},this.state.num),/*#__PURE__*/React.createElement(\"button\",{className:\"propBtn propBtn-right\",value:\"add\",onClick:this.changeNum.bind(this)},\" + \"))));}}]);return PropItem;}(React.Component);PropItem.tipStyle={\"data-place\":\"right\",\"data-type\":\"info\",\"data-background-color\":\"white\",\"data-text-color\":\"rgb(0, 0, 0, 0.65)\",\"data-class\":\"tips\"};var PropTable=/*#__PURE__*/function(_React$Component2){_inherits(PropTable,_React$Component2);var _super2=_createSuper(PropTable);function PropTable(props){var _this2;_classCallCheck(this,PropTable);_this2=_super2.call(this,props);_this2.items=props.items;_this2.submit=props.callback.submit;_this2.name=props.name;_this2.callback={total:props.callback.cost,partial:_this2.handleCost.bind(_assertThisInitialized(_this2))};if(!(_this2.name in temp))temp[_this2.name]={};_this2.state=temp[_this2.name];_this2.res=_this2.items.map(function(i){return/*#__PURE__*/React.createElement(PropItem,{class:_this2.name,name:i,value:i in _this2.state?_this2.state[i]:0,key:sha256(i),callback:_this2.callback});});return _this2;}_createClass(PropTable,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){for(var i in this.state){temp[this.name][i]=this.state[i];}this.submit(this.state,this.name);}},{key:\"handleCost\",value:function handleCost(name,num){this.setState(_defineProperty({},name,num));this.submit(this.state,this.name);}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"propArea\"},/*#__PURE__*/React.createElement(\"div\",{className:\"title\"},transName[this.name]),/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"tbody\",null,this.res)));}}]);return PropTable;}(React.Component);function Academic(props){var items=['会计','人类学','考古学','建筑学','艺术史','生物学','密码学','地质学','克苏鲁神话','历史','语言','法律','文献查阅','医学','神秘学','物理学','神学'];return/*#__PURE__*/React.createElement(PropTable,{items:items,callback:props.callback,name:\"Academic\"});}function Social(props){var items=['察言观色','议价','官僚','警方交谈','信誉','奉承','审讯','威胁','口述采访','安抚','底层社会'];return/*#__PURE__*/React.createElement(PropTable,{items:items,callback:props.callback,name:\"Social\"});}function Normal(props){var items=['运动','藏匿','伪装','驾驶','电器维修','爆破','偷窃','枪械','急救','逃脱','健康','催眠','机械维修','导航','物品整备','精神分析','骑术','心智','坚毅','搏击','警觉','追踪','潜行','近战武器'];return/*#__PURE__*/React.createElement(PropTable,{items:items,callback:props.callback,name:\"Normal\"});}export{Academic,Social,Normal};","map":{"version":3,"sources":["E:/project/front/tmd/src/components/prop.js"],"names":["React","sha256","ReactTooltip","data","temp","transName","Academic","Social","Normal","PropItem","props","state","num","value","isPrompt","name","class","intro","total","callback","partial","setState","e","n","tipStyle","changeNum","bind","Component","PropTable","items","submit","cost","handleCost","res","map","i"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport sha256 from 'js-sha256'\r\nimport ReactTooltip from 'react-tooltip'\r\nimport './CSS/prop.css'\r\nimport data from './data/prompt.json'\r\nvar temp = {};\r\nvar transName = {\r\n    Academic: '学术能力',\r\n    Social: '社交能力',\r\n    Normal: '普通能力'\r\n}\r\n\r\nclass PropItem extends React.Component {\r\n    static tipStyle = {\r\n        \"data-place\": \"right\",\r\n        \"data-type\": \"info\",\r\n        \"data-background-color\":\"white\",\r\n        \"data-text-color\":\"rgb(0, 0, 0, 0.65)\",\r\n        \"data-class\":\"tips\"\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            num: props.value,\r\n            isPrompt: false,\r\n        }\r\n        this.name = props.name;\r\n        this.class = props.class;\r\n        this.intro = data[transName[this.class]][this.name];\r\n        this.total = props.callback.total;   //总点数回调\r\n        this.partial = props.callback.partial;   //类别统计回调\r\n        this.partial(this.name, this.state.num);\r\n    }\r\n\r\n    handlePrompt() {\r\n        this.setState({ isPrompt: true })\r\n    }\r\n\r\n    changeNum(e) {\r\n        //由上层函数判断操作合法性\r\n        //如果操作合法，则改变当前对象的值\r\n        let n = this.state.num + this.total(e, this.state.num);\r\n        this.partial(this.name, n);\r\n        this.setState({ num: n });\r\n    }\r\n\r\n    render() {\r\n        return <tr>\r\n            <td className='propItem'>\r\n                <ReactTooltip/>\r\n                <div className='propName' data-tip={this.intro} {...PropItem.tipStyle}>\r\n                    {this.name}\r\n                </div>\r\n                <div className='propCtrl'>\r\n                    <button className='propBtn propBtn-left' value='sub' onClick={this.changeNum.bind(this)} > - </button>\r\n                    <div className='propNum'>\r\n                        {this.state.num}\r\n                    </div>\r\n                    <button className='propBtn propBtn-right' value='add' onClick={this.changeNum.bind(this)} > + </button>\r\n                </div>\r\n            </td>\r\n        </tr>;\r\n    }\r\n}\r\n\r\nclass PropTable extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.items = props.items;\r\n        this.submit = props.callback.submit;\r\n        this.name = props.name;\r\n\r\n        this.callback = {\r\n            total: props.callback.cost,\r\n            partial: this.handleCost.bind(this)\r\n        }\r\n\r\n        if (!(this.name in temp)) temp[this.name] = {};\r\n        this.state = temp[this.name];\r\n        this.res = this.items.map((i) => {\r\n            return <PropItem class={this.name} name={i} value={i in this.state ? this.state[i] : 0}\r\n                key={sha256(i)} callback={this.callback} />;\r\n        })\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        for (let i in this.state) temp[this.name][i] = this.state[i];\r\n        this.submit(this.state, this.name);\r\n    }\r\n\r\n    handleCost(name, num) {\r\n        this.setState({ [name]: num });\r\n        this.submit(this.state, this.name);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className='propArea'>\r\n                <div className='title'>{transName[this.name]}</div>\r\n                <table>\r\n                    <tbody>\r\n                        {this.res}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction Academic(props) {\r\n    var items = ['会计', '人类学', '考古学', '建筑学', '艺术史', '生物学', '密码学', '地质学', '克苏鲁神话', '历史', '语言', '法律', '文献查阅', '医学', '神秘学', '物理学', '神学'];\r\n\r\n    return <PropTable items={items} callback={props.callback} name='Academic' />;\r\n}\r\nfunction Social(props) {\r\n    var items = ['察言观色', '议价', '官僚', '警方交谈', '信誉', '奉承', '审讯', '威胁', '口述采访', '安抚', '底层社会'];\r\n\r\n    return <PropTable items={items} callback={props.callback} name='Social' />;\r\n}\r\n\r\nfunction Normal(props) {\r\n    var items = ['运动', '藏匿', '伪装', '驾驶', '电器维修', '爆破', '偷窃', '枪械', '急救', '逃脱', '健康', '催眠', '机械维修', '导航', '物品整备', '精神分析', '骑术', '心智', '坚毅', '搏击', '警觉', '追踪', '潜行', '近战武器'];\r\n\r\n    return <PropTable items={items} callback={props.callback} name='Normal' />;\r\n}\r\nexport {\r\n    Academic,\r\n    Social,\r\n    Normal,\r\n};"]},"metadata":{},"sourceType":"module"}